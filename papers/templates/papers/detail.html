{% load my_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
    {% include "head.html" with JavaScript='tablesorter' %}
    <title>{{ object }} / Papers / {{ SITE_NAME }}</title>
</head>

<body>
{% include "navbar.html" with active='papers' %}
<div class="container-fluid">

    <div class="row">

        <div class="col-xs-12">

            <h1>{{ object }}</h1>

            {% if object.pmid != 0 %}
            <table class="table">
                <tr>
                    <th width="20%" scope="row" class="first">Pubmed ID</th>
                    <td class="first"><a class="external" href="http://www.ncbi.nlm.nih.gov/pubmed/{{ object.pmid }}/">{{ object.pmid }}</a></td>
                </tr>
                <tr>
                    <th scope="row">Title</th>
                    <td>{{ title }}</td>
                </tr>
                <tr>
                    <th scope="row">Authors</th>
                    <td>{{ authors|join_and_more:1000 }}</td>
                </tr>
                <tr>
                    <th scope="row">Abstract</th>
                    <td>{{ abstract }}</td>
                </tr>
                <tr>
                    <th scope="row">Citation</th>
                    <td>{{ citation }}</td>
                </tr>
                {% if object.notes %}
                <tr>
                    <th scope="row">Notes</th>
                    <td>{{ object.notes }}</td>
                </tr>
                {% endif %}
            </table>
            {% endif %}

            <div class="pull-right">{% include "zip.html" %}</div>
            <h3>Datasets</h3>

            {% if thanks %}
            <p>
                {{ thanks|capfirst }}
            </p>
            {% endif %}

            <div class="alert alert-warning" role="alert">
                <strong>Warning:</strong> These data may contain errors.
                <p>
                    YeastPhenome.org is running in beta version.
                    The data are available for download, but, as of today, we cannot guarantee the absence of errors or code bugs introduced during processing.
                    This warning will be removed after all cross-checks and validations have been completed.
                    In the meantime, please, be careful when using the data.
                </p>
            </div>

            {% if object.dataset_set.all %}

            <a href="/papers/{{ object.id }}/{{ DOWNLOAD_PREFIX }}_{{ object.pmid }}_datasets_list.txt">Download the list of datasets</a>

            <table id="papersTable" class="tablesorter table table-condensed table-hover" width="100%">
                <thead>
                <tr>
                    <th>Phenotypes</th>
                    <th>Conditions</th>
                    <th>Collection</th>
                    <th>Tested mutants</th>
                    <th>Data</th>
                </tr>
                </thead>

                <tbody>
            {% for dataset in object.dataset_set.all %}
            <tr>
                <td>{{ dataset.phenotype.link_detail|safe }}</td>
                <td>{{ dataset.conditionset.link_detail|safe }}</td>
                <td>{{ dataset.collection }}</td>
                <td>{{ dataset.tested_space|safe }}</td>
                <td>
                    {% if dataset.has_data_in_db %}
                    <a class="download" href="/data/datasets/{{ dataset.id }}/{{ DOWNLOAD_PREFIX }}_dataset:{{ dataset.id}}_data.txt">{{ dataset.data_available|capfirst }}</a>
                    {% else %}
                    <span class="text-muted">{{ dataset.data_available|capfirst }}</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
            </tbody>
            </table>

            <a href="/data/papers/{{ object.id }}/{{ DOWNLOAD_PREFIX }}_pmid:{{ object.pmid }}_data.txt">Download data matrix</a>

            {% endif %}

            <h3>Curation history</h3>
            <div class="row">
                <div class="col-xs-4">
                    <table class="table table-condensed table-no-border">
                        {% for x in paper.history %}
                        <tr>
                            <td>{{ x.status_date }}</td>
                            <td>{{ x.type|capfirst }} {{ x.status.status_name }}.</td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>

            {% include "footer.html" %}

        </div>
    </div>
</div>

<script>$(document).ready(function(){
    $("#papersTable").tablesorter();
});</script>

{% include "ga.html" %}

</body>
</html>
